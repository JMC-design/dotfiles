set mbox_type=Maildir
set folder="~/Mail"
set mask="!^\\.[^.]"
set record="~/Mail/local/sent"
set postponed="~/Mail/local/drafts"

set realname = "Gerry Gonzaga"

### SENDER ACCOUNTS
##  Defaults
set sendmail = "/usr/bin/msmtp -a gmail"
set from = "gdgonzaga@gmail.com"
set envelope_from = "yes"
set reverse_name = "yes"
alternates "gerry@gonzaga.im|gdgonzaga@gmail.com"

## Allow switching
#  Gmail
macro index,pager \e1 "\
  :set from=gdgonzaga@gmail.com\n\
  :set sendmail = '/usr/bin/msmtp -a gmail'\n\
  :set status_format=\"-%r-GMAIL: %f \[Msgs:%?M?%M/?%m%?n? New:%n?%?o? Old:%o?%?d? Del:%d?%?F? Flag:%F?%?t? Tag:%t?%?p? Post:%p?%?b? Inc:%b?%?l? %l?]---(%s/%S)-%>-(%P)---\"\n"\
  "Switch to Gmail"

# gonzaga.im
macro index,pager \e2 "\
  :set from=gerry@gonzaga.im\n\
  :set sendmail = '/usr/bin/msmtp -a gonzaga.im'\n\
  :set status_format=\"-%r-G.IM: %f [Msgs:%?M?%M/?%m%?n? New:%n?%?o? Old:%o?%?d? Del:%d?%?F? Flag:%F?%?t? Tag:%t?%?p? Post:%p?%?b? Inc:%b?%?l? %l?]---(%s/%S)-%>-(%P)---\"\n"\
  "Switch to gonzaga.im"

set edit_headers
set pager_index_lines=7
#set date_format="%a, %b %d, %Y at %I:%M:%S%p %Z"
set index_format="%Z %[%b %d %R] %-15.15L (%?l?%4l&%4c?) %s"
set sort=threads
set sort_aux=last-date-received
set status_format="-%r-GMAIL: %f \[Msgs:%?M?%M/?%m%?n? New:%n?%?o? Old:%o?%?d? Del:%d?%?F? Flag:%F?%?t? Tag:%t?%?p? Post:%p?%?b? Inc:%b?%?l? %l?]----%>-(%P)---\"

auto_view text/html

#abook settings
set query_command = "abook --mutt-query '%s'"
macro index,pager \ca "<pipe-message>abook --add-email<return>" "add the sender address to abook"

bind editor <Tab> complete-query

# vim bindings
bind index G last-entry
bind index,pager  \cf next-page
bind index,pager \cb previous-page
#bind editor <space> noop
bind pager J next-entry
bind index j next-entry
bind pager K previous-entry
bind index k previous-entry
bind generic J next-line
bind pager j next-line
bind generic K previous-line
bind pager k previous-line
bind index \cN toggle-new
bind pager,index,generic N search-opposite

# custom bindings
bind index f limit
bind index,pager F forward-message
macro index \cr <refresh>
bind pager \cr redraw-screen
bind index,pager <Esc>b bounce-message

macro pager \co <pipe-entry>'urlscan'<enter> 'Follow links with urlscan'

# mutt-kz bindings
set sidebar_width = 20 
set sidebar_visible = yes
set sidebar_delim = " "
color sidebar_new color33 default
bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager \cl sidebar-open

#bind index <Esc>S sidebar-toggle
macro index,pager B ":set sidebar_visible=no<Return>"
macro index,pager b ":set sidebar_visible=yes<Return>"

# Archive mail
macro index,pager A "<modify-labels-then-hide>+archive\n<sync-mailbox>"
#
# Color definitions

color normal color249 default
color quoted color24 default
color quoted2 color24 default
color signature color126 default
color indicator brightwhite color235 
color error red default
color status color185 color24
color tree color48 default
color tilde color245 default
color message color185 default
color markers color185  default
color attachment color221 default
color search color48 color240

# smileys :)
#color body brightyellow default '(\(:|:\)|;\)|:-\)|:>|8-\))'
#color body brightblue default '(\):|:\(|:-\(|:\'()'
#color body yellow default '(:D|:-D|=-O|:-[pP]|:-\*|>:o|:\/|:-\/)'

color hdrdefault color238 default
color header color243 default "^(Date|From|Subject)"
color header color73 default "^(To|Reply-To):"
color header color245 default "^(X-Original-To):"
color header color96 default "^(User-Agent|X-Editor):"
color header color209 default "^(Delivered-to):"
color body blue default "(ftp|http)://\w[^ ]+[^.]" # point out URLs
color body color128 default '[-.+\w]+@[-.\w]+[^.]' # e-mail addresses
color underline brightgreen default
mono quoted bold

## mutt-kz
set virtual_spoolfile = yes

set nm_default_uri = "notmuch:///home/gerry/Mail"

virtual-mailboxes \
  "INBOX" "notmuch://?query=tag:inbox NOT tag:archive" \
  "Pros" "notmuch://?query=tag:jobs NOT tag:archive" \
  "RSS" "notmuch://?query=tag:rss NOT tag:archive" \
  "BT" "notmuch://?query=tag:bt and tag:unread" \
  "ROSS" "notmuch://?query=tag:ross NOT tag:archive" \
  "Archlinux" "notmuch://?query=tag:archlinux NOT tag:archive" \
  "Github" "notmuch://?query=tag:github NOT tag:archive" \
  "PLUG" "notmuch://?query=tag:plug NOT tag:archive" \
  "Planet Lisp" "notmuch://?query=tag:planetlisp NOT tag:archive" \
  "Work" "notmuch://?query=tag:work NOT tag:archive" \
  "Courses" "notmuch://?query=tag:courses NOT tag:archive" \
  "LOCAL" "notmuch://?query=tag:local NOT tag:archive NOT folder:sent NOT folder:drafts NOT tag:rss NOT tag:bt NOT tag:jobs" \
  "!" "notmuch://?query=tag:!" \
  "RSS[A]" "notmuch://?query=tag:rss and tag:archive" \
  "Ross[A]" "notmuch://?query=tag:ross and tag:archive" \
  "ARCHIVE" "notmuch://?query=tag:archive NOT tag:spam" \
  "Local Drafts" "notmuch://?query=tag:drafts" \
  "Local Sent" "notmuch://?query=tag:sent and tag:local" \
  "Sent" "notmuch://?query=tag:sent and NOT tag:local" \
  "Spam" "notmuch://?query=tag:spam"
